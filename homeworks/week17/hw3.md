## 什麼是 MVC？
MVC 架構：
* Model：負責管理資料
* View：負責管理畫面的顯示
* Controller：Model 跟 View 之間的協調者

當 Controller 收到 request 以後，會先到 Model 拿資料，Controller 拿到資料之後會將資料交給指定的 View，等到 View 將資料與畫面組合起來之後會拿回來給 Controller，最後再由 Controller 回覆 response

## 請寫下這週部署的心得
記得 week7 的時候，剛學會用 JavaScript 操控瀏覽器，當時有種，怎麼好像只用了前端就快要把網站都寫出來的感覺？
到了 week9 之後，學到了 PHP，突然又有種，我怎麼只用了後端就把網站做出來了的感覺？

現在學到了後端框架，了解了 MVC 架構，再用 week8 的抽獎程式來串接自己做的 API，終於有種，我是靠著前端 + 後端把網頁做出來的感覺了！

在部署到機器得時候，為了把原本 Apache 佔用的 80 port 給清除，花費了很多精神，奮戰到天亮的概念，參考了超級無敵多資料，嘗試調整了老半天。ports.conf 也都改好了，就是一直被佔用著。

直到上個廁所回來想說，不然我把 Apache 重啟看看好了，結果就成功了！
所以我設定好了一直不知道要重啟，所以它佔用在 80 port 佔用的很開心。
終於可以去睡覺了，真棒～

後來 Nginx 好不容易跑起來了，結果網頁打開卻出現 Error 502，查了很多方式都找不出原因，後來從 pm2 logs 查看才發現，
我檔案放上機器之後，沒有把套件裝好，資料庫也沒有建立。（傻傻的以為檔案放上來就沒事了）

感覺在 Nginx 上面部署程式，就像是自己去五金行買電腦零件，然後再自己想辦法把電腦的執行環境建立起來一樣。
被設定搞昏頭，不曉得究竟自己現在設定時有沒有設定好，感覺介於好跟沒好之間，又不知道怎麼修，就直接進到下一步，結果一步錯步步錯。從最後一路把 bug 修回來修到最前面。

到了最後才自己理出了一套我認為比較好的部署流程：

1. 先把 Nginx 安裝起來（但先不要去動任何設定！）
2. 把原本跑在 80 port 的 Apache 先關掉
3. 確認 Nginx 可以正常在 80 port 執行
4. 處理上傳到機器上的檔案 (node.modules 把它裝好、資料庫也要連線好)
5. 確認在上傳上來的檔案直接執行 node index.js 不會出現任何 Error (記得開啟測試用的 port 直接在瀏覽器上面連線確認是否正常執行)
6. 確認單獨執行程式沒有問題後，再把程式移到 Pm2 上面執行（也要測試 Pm2 執行不會有錯誤）
7. 前面的步驟都沒有任何錯誤之後，再來設定 Nginx

覺得 Huli 有很多神級的指令，果然高等玩家技能特別強大，就當我在 File Zilla 把 Node.modules 的 5 千多個檔案慢慢刪除時，他給了我一本奧義的技能書 `rm -rf node_modules` 瞬間剷平一切，從原本要跑 1 個小時，現在 0.5 秒就完事了，我還在原地傻眼！


## 寫 Node.js 的後端跟之前寫 PHP 差滿多的，有什麼心得嗎？
感覺用 Express 寫出的程式碼比 PHP 乾淨很多，看起來也比較舒服，檔案之間按照一定的規則來切割，要維護很快就知道要去哪裡找到正確的檔案。不過在開始使用別人提供好的工具後，也會開始伴隨著別人已經做好的設定，對於這些設定不了解的時候，常常會出現意料之外的錯誤。它不像寫原生的程式碼，只要自己不做設定就一定不會有設定，當我們在使用別人提供的工具時，別人會先幫你把你沒想到的設定先處理好，所以不了解這些設定，就會遇到很多錯誤，就像明明 express-session 都有設定好了，卻都沒辦法正常運作，搞了老半天才曉得，原來有一個地方可以設定 cookie: { secure: true }，要把這項設定給拿掉才能夠成功設置 session，像這類型的小設定，對於不熟悉工具的我們，常常會不小心忽略掉，需要藉由一次一次的錯誤才會了解到原來自己又忽略了什麼。
