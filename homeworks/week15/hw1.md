## 十一到十五週心得



#### 網站前後端開發基礎測試，答題紀錄：
##### Q1
我認為只用 GET 方法依然可以做出 Todo list 的後端，只是所有資訊通通會呈現在 url 當中，資料就沒辦法隱密
只要定義好 url 要怎麼寫，後端依然依照 url 來分析資料並判斷要做新增、編輯還是刪除資料，例如下面這樣：
 baseURL/create?todo=123 ，後端可以判斷為新增內容為 123 的 todo
 baseURL/update?id=1&todo=456 ，後端可以判斷為將 id=1 的 todo 內容改成 456
 baseURL/delete?id=1 ，後端可以判斷為刪除 id=1 的資料
這樣做當然是非常不好，一方面難以維護，另一方面資料隱密度很差，但是以功能面來說，確實是做得出來的。

##### Q2
既然 GET 都做得到了，POST 當然一樣做得到，可以用跟上面 GET 一模一樣的方式，將所有資訊及夾帶在 url 上面，或者將部分訊息寫在 request 的 body 當中

##### Q3
Huli 有說過，只要後端 server 沒有開放 CORS，前端在不同網域底下，無論如何都是不可能拿到資料的，前端頂多可以藉由設定 no-cors，來讓瀏覽器不要報錯誤訊息，但也只是空資料而已，所以前端確實無法利用 ajax 呼叫 API 刪除資料。
這題我答錯了！
回去翻一下 Huli 寫的文章「輕鬆理解 Ajax 與跨來源請求」，我發現我有兩個地方搞錯了：
1. 第一個弄錯的是簡單請求的定義，Huli 文章中給了一個很簡單的定義
`如果你沒有加任何自定義的 Header，而且又是 GET 的話，絕對是簡單請求`
因為題目是用 POST ，所以我以為它屬於非簡單請求，但是實際上只要是 GET, POST 或者 HEAD 方法，且沒有帶上任何 custom header 都屬於簡單請求
2. 第二個弄錯的地方是 request 到底會不會發出去，我以為簡單請求 request 會發出去而且瀏覽器不會報錯，但事實上簡單請求是 request 會發出去，但是拿不到回傳的 response，所以 request 會發送成功但是瀏覽器會報錯。而非簡單請求會先發出 Preflight Request ，如果這個 Preflight Request 沒有過，帶資料的 requset 就不會發出去了。

##### Q4
這樣做只能防止使用者利用 `<script>` 標籤而已，但是還是有其他方式可以執行 XSS 攻擊。
舉幾個我想得到的方式：
1. 利用 `<link>` 標籤引入一個惡意檔案，對程式做攻擊
2. 如果該檔案有引入一些 Library 讓一些 JS 語法可以直接寫在 HTML 標籤裡頭，那就可以直接在標籤動手腳了，ex. `<h1 onclick="....">` 

##### Q5
我認為利用 prepared statement 來防止 SQL injection 是可以的，就像我們課程使用的方式，先 prepare 一個 SQL 的指令，在另外把參數利用 bind_param 函式傳進去。

##### Q6
使用者雖然只能看到自己留言的刪除按鈕，但是把刪除按鈕的連結網址複製下來，把指令中的 id 改成別人留言的 id，一樣可以發送刪除別人留言的指令，後端如果沒有驗證流言是不是屬於該使用者，收到指令就直接刪除，這樣是非常危險的，不管是前端還是後端通通都要做權限管理。

##### Q7
瀏覽器上可以直接看到使用者資料？我馬上去我的網站試試看，找到帶有敏感資訊的檔案 conn.php，網址連過去一看，什麼都看不到。（還好 php 的資料只要沒有 echo 出來，瀏覽器上面是拿不到資料的）回來看看題目用的是 .json 的檔案，小明說想要用 ajax 直接拿資料，我覺得問題不在於要不要用 ajax 拿資料，問題應該是瀏覽器上面不該看到使用者資料才對，這種帶敏感資訊的資料不是應該要存放在資料庫嗎？像這樣放在檔案裡又沒有任何密碼保護，任何人連的到這個檔案都可以看到裡面的內容，相當危險。

##### Q8
密碼存入資料庫以前先做雜湊，這個做法是正確的，雜湊過的密碼是無法回推回去的，可以有效防止當資料庫被看光光的時候，密碼被有心人士利用。

##### Q9
去查詢了一下 window.onload 的作用，會等網頁的全部內容，包括圖片，CSS 等內容載入後就會觸發。所以小明在網站載入成功後打開 console，可以看到文字，這很正常啊？
看完老師的解答，發現自己答錯了，沒看到這題的關鍵點，原本是要將 function 傳入，但是加上小括弧之後會變成直接呼叫 function，意思差非常多。這題應該是自己會不小心犯下的錯誤，還好被老師點出來了，知道要特別注意。

##### Q10
這題我想了一陣子想不到，就直接看答案了，原來它考的是對於錯誤訊息的理解。一般我們看到錯誤訊息，會直覺得把變數 log 出來看看，不會實際去想問題能不能在這段程式中直接看出來。老師解釋過後，讓我更能理解程式在運行時是如何報錯的，以及我們如何換著角度去 debug，最後推導出 homeData 有宣告但是 undefined 這個結果，回憶這個過程真的津津有味，喜歡類似的題目，希望老師多出一些＾＾

這些題目都是出在刀口上的，針對初學者會搞錯的地方，帶入情境後讓我們去思考，最後再回到課程的核心概念，這都是連貫起來的。 
