## 十一到十五週心得
從十一週開始，發現筆記的數量跟篇幅都比以往多了不少，大概是因為學習新的前端工具，需要把許多用法及安裝步驟都寫在裡面，正好趁著複習週的機會，把一些能夠統整的地方，整理成更精簡更便於搜尋的模式，未來想到某個檔案，希望點進去第一眼直接能看到我想找尋的答案。（當然這是理想狀況啦，畢竟也不知道以後回來筆記要翻找的究竟是哪一個答案）

第十一週最重要的就是資安，至少正確觀念要銘記在心，語法不小心忘了可以再回來查。我覺得 Huli 給了一句非常棒的話：「永遠不要相信 client 端傳過來的資料」，在需要輸入資料以及印出資料這兩個地方，就會下意識特別去小心它。

第十二週最是讓人心情愉悅的一週，在學習 jQuery 跟 Bootstrap 的過程，一眼就能看出這些語法其實就是在做以前學過的什麼什麼事情，所以很輕鬆就可以理解怎麼去使用它，只差在搜尋到自己想的那個功能的寫法，而第一次在接觸到 Functional CSS 一度認為，就是它了！寫起來既方便又好整理，以後程式都這樣寫吧，心裡雖然這樣想過，但實際寫作業時發現沒那麼簡單，有種自己要生出功能給自己用的感覺，突然不知道如何做整理比較好。而且之後學到 SCSS 後，就疏忽了對 Functional CSS 的練習了，突然發現「學到的工具一多，就會不小心把其中某樣工具悄悄遺忘在角落了」，還好 Huli 先讓我們熟悉了 Vanilla JS 之後才去學其他工具，否則先學了其他的工具之後，原生的寫法我一定會學不好！

第十三週其實有點混亂，真的需要看著 Huli 手把手安裝的影片，一步步照著實做，才會比較熟悉這段過程裡當中到底發生了什麼事情，還記得第一次點開 package.json 應該是第三週在學習 npm 那個時候吧，當時 Huli 開始講解這份檔案當中的設定時，我心想這也太複雜了吧，感覺就是電腦專家才會去打開來看的設定檔啊，我這麼菜怎麼看得懂。（心裡一度逃避對它的了解）現在再一次看到 package.json，用不同的視野去看它的時候，才了解它對於一份專案來說有多麼的重要。而且絕對不是什麼專家才會去看的設定，應該是任何前端工程師都應該要看得懂的文件。（還好現在了解還來得及）

第十四週


#### 瀏覽器運作導讀 - 心得
看完瀏覽器運作的文章，發現瀏覽器真的是一個很神奇的程式，裡面舉了一個很讓人印象深刻的例子：你在電話裡跟朋友說想要在畫面上畫出一個藍色的圓形，跟一個紅色的方形。可是這兩個圖案的位置在哪裡？如果重疊是誰要在上誰要在下？這些資訊要描述出來真的很麻煩，我要一個藍色的圓形，它的半徑是 15 cm，圓心要設在座標 ( 25, 40 ).....。如果每一個畫面上的元件都需要用這種描述方式，寫網頁真的會非常麻煩，也非常難維護，可是瀏覽器這個程式卻可以以非常聰明的方式來處理這些資訊，既能讓開發人員便於維護，也能讓使用者有良好的體驗，熟悉這些底層的運作方式可以讓人更清楚自己所寫的程式，是用什麼方式呈現出畫面來的。

#### 網站前後端開發基礎測試，答題紀錄：
##### Q1 如果你只能用 GET 寫一個 Todo list 的後端，你做得到嗎？如果做不到，原因為何？
我認為只用 GET 方法依然可以做出 Todo list 的後端，只是所有資訊通通會呈現在 url 當中，資料就沒辦法隱密
只要定義好 url 要怎麼寫，後端依然依照 url 來分析資料並判斷要做新增、編輯還是刪除資料，例如下面這樣：
 baseURL/create?todo=123 ，後端可以判斷為新增內容為 123 的 todo
 baseURL/update?id=1&todo=456 ，後端可以判斷為將 id=1 的 todo 內容改成 456
 baseURL/delete?id=1 ，後端可以判斷為刪除 id=1 的資料
這樣做當然是非常不好，一方面難以維護，另一方面資料隱密度很差，但是以功能面來說，確實是做得出來的。

##### Q2 承上，如果變成只能用 POST 這個 method，做得到嗎？如果做不到，原因為何？
既然 GET 都做得到了，POST 當然一樣做得到，可以用跟上面 GET 一模一樣的方式，將所有資訊及夾帶在 url 上面，或者將部分訊息寫在 request 的 body 當中

##### Q3 公司前後端的網域是不同的，而且後端並沒有加上 CORS 的 header，因此小明認為前端用 ajax 會受到同源政策的限制，request 根本發不出去，所以前端沒辦法利用 ajax 呼叫這個 API 刪除文章。
請問小明的說法是正確的嗎？如果錯誤，請指出錯誤的地方。

Huli 有說過，只要後端 server 沒有開放 CORS，前端在不同網域底下，無論如何都是不可能拿到資料的，前端頂多可以藉由設定 no-cors，來讓瀏覽器不要報錯誤訊息，但也只是空資料而已，所以前端確實無法利用 ajax 呼叫 API 刪除資料。
這題我答錯了！
回去翻一下 Huli 寫的文章「輕鬆理解 Ajax 與跨來源請求」，我發現我有兩個地方搞錯了：
1. 第一個弄錯的是簡單請求的定義，Huli 文章中給了一個很簡單的定義
`如果你沒有加任何自定義的 Header，而且又是 GET 的話，絕對是簡單請求`
因為題目是用 POST ，所以我以為它屬於非簡單請求，但是實際上只要是 GET, POST 或者 HEAD 方法，且沒有帶上任何 custom header 都屬於簡單請求
2. 第二個弄錯的地方是 request 到底會不會發出去，我以為簡單請求 request 會發出去而且瀏覽器不會報錯，但事實上簡單請求是 request 會發出去，但是拿不到回傳的 response，所以 request 會發送成功但是瀏覽器會報錯。而非簡單請求會先發出 Preflight Request ，如果這個 Preflight Request 沒有過，帶資料的 requset 就不會發出去了。

##### Q4 既然 XSS 的問題是因為可以執行 script，那我就直接把 <script> 標籤取代掉就好了，請問小明的說法是正確的嗎？如果錯誤，請指出錯誤的地方。


這樣做只能防止使用者利用 `<script>` 標籤而已，但是還是有其他方式可以執行 XSS 攻擊。
舉幾個我想得到的方式：
1. 利用 `<link>` 標籤引入一個惡意檔案，對程式做攻擊
2. 如果該檔案有引入一些 Library 讓一些 JS 語法可以直接寫在 HTML 標籤裡頭，那就可以直接在標籤動手腳了，ex. `<h1 onclick="....">` 

##### Q5 只要用 prepared statement，這樣子就能防止 SQL Injection 了！
請問小明的說法是否正確？如果錯誤，請指出錯誤的地方。

我認為利用 prepared statement 來防止 SQL injection 是可以的，就像我們課程使用的方式，先 prepare 一個 SQL 的指令，在另外把參數利用 bind_param 函式傳進去。

##### Q6 前端不會顯示刪除文章的按鈕，就不可能刪除到別人的文章。請問小明的說法是正確的嗎？如果錯誤，請指出錯誤的地方。

使用者雖然只能看到自己留言的刪除按鈕，但是把刪除按鈕的連結網址複製下來，把指令中的 id 改成別人留言的 id，一樣可以發送刪除別人留言的指令，後端如果沒有驗證流言是不是屬於該使用者，收到指令就直接刪除，這樣是非常危險的，不管是前端還是後端通通都要做權限管理。

##### Q7 既然我用瀏覽器可以看得到內容，那用 Ajax 的時候也一定可以拿得到資料啦！我們來用 Ajax 拿資料吧！請問小明的說法是正確的嗎？如果錯誤，請指出錯誤的地方。

瀏覽器上可以直接看到使用者資料？我馬上去我的網站試試看，找到帶有敏感資訊的檔案 conn.php，網址連過去一看，什麼都看不到。（還好 php 的資料只要沒有 echo 出來，瀏覽器上面是拿不到資料的）回來看看題目用的是 .json 的檔案，小明說想要用 ajax 直接拿資料，我覺得問題不在於要不要用 ajax 拿資料，問題應該是瀏覽器上面不該看到使用者資料才對，這種帶敏感資訊的資料不是應該要存放在資料庫嗎？像這樣放在檔案裡又沒有任何密碼保護，任何人連的到這個檔案都可以看到裡面的內容，相當危險。

##### Q8 小明使用了 bcrypt，密碼在存入資料庫以前都會先使用 bcrypt 來做雜湊。
請問小明的做法是正確的嗎？如果錯誤，請指出錯誤的地方。

密碼存入資料庫以前先做雜湊，這個做法是正確的，雜湊過的密碼是無法回推回去的，可以有效防止當資料庫被看光光的時候，密碼被有心人士利用。

##### Q9 小明在網站載入成功後打開 console，發現文字的確有被印出來。小明的程式碼是否有問題？

去查詢了一下 window.onload 的作用，會等網頁的全部內容，包括圖片，CSS 等內容載入後就會觸發。所以小明在網站載入成功後打開 console，可以看到文字，這很正常啊？
看完老師的解答，發現自己答錯了，沒看到這題的關鍵點，原本是要將 function 傳入，但是加上小括弧之後會變成直接呼叫 function，意思差非常多。這題應該是自己會不小心犯下的錯誤，還好被老師點出來了，知道要特別注意。
 
##### Q10 小明在執行程式的時候出現了一個錯誤，根據你的推理，會出現這個錯誤的原因是什麼？

這題我想了一陣子想不到，就直接看答案了，原來它考的是對於錯誤訊息的理解。一般我們看到錯誤訊息，會直覺得把變數 log 出來看看，不會實際去想問題能不能在這段程式中直接看出來。老師解釋過後，讓我更能理解程式在運行時是如何報錯的，以及我們如何換著角度去 debug，最後推導出 homeData 有宣告但是 undefined 這個結果，回憶這個過程真的津津有味，喜歡類似的題目，希望老師多出一些＾＾

這些題目都是出在刀口上的，針對初學者會搞錯的地方，帶入情境後讓我們去思考，最後再回到課程的核心概念，這都是連貫起來的。 
